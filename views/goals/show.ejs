<% include presenter.ejs %>
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <link type="text/css" rel="stylesheet" href="../../css/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Raleway:700|Pacifico" rel="stylesheet">

    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <title>Cheezetory</title>
  </head>
  <body>
    <img class="logo" src="../../images/logo.png" >

    <a id="home" href="/">
      <img class="sm-circle" src="../../images/home.png" align="left">
    </a>
    <a id="logout" href="/logout">
      <img class="sm-circle" src="../../images/sign-out.png" align="right">
    </a>

    <h1>Cheezetory</h1>
    <% let completionArray = [];
    let goalsByDay = [];
    let weekdays = ['On Sunday', 'On Monday', 'On Tuesday', 'On Wednesday', 'On Thursday', 'On Friday', 'On Saturday']
    populateAndOrderArrays(weekdays, completionArray, goalsByDay, goals);
    weekdays[0] = 'Today';
    let streaks = [];
    let percentArr = [];
    populatePercentArr(percentArr, completionArray);
    populateStreaksArr(percentArr, streaks); %>
    <ul>
      <% for (let i = 0; i < weekdays.length; i++) { %>
        <li class="form-element"><%= weekdays[i] %> you <%= percentArr[i] %>
          <button class="days" value="<%= i %>">Show daily goals</button>
          <% if (goalsByDay[i] !== 0) { %>
            <div id="day<%= i %>" class="goals hide">
                  <%= goalsByDay[i] %>
            </div>
          <% } %>
        </li>
      <% } %>
    </ul>

    <% streak = getCurrentStreak(streaks);
    if ( streak !== 0 && streak > 1 ) { %>
      <h3>Current streak: <%= streak %> days of cheezy joy!</h3>
      <% let streakCount = streak
      while (streakCount > 0) { %>
          <img class="sm-circle" src="../../images/cheese.png">
        <%  streakCount --
      }
    } %>
    <script type="text/javascript" src="../../src/cheezetoryInterface.js"></script>
  </body>
</html>
